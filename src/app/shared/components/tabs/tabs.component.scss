// Tabs component styles using BEM methodology
// Integrates with existing theme system via CSS variables

.tabs {
  // Base container
  display: flex;
  flex-direction: column;
  width: 100%;

  // ELEMENTS

  // Tab list container
  &__list {
    display: flex;
    gap: var(--spacing-xs);
    border-bottom: 2px solid var(--color-border);
    overflow-x: auto;
    overflow-y: hidden;

    // Hide scrollbar but keep functionality
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) transparent;

    &::-webkit-scrollbar {
      height: 4px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background-color: var(--color-border);
      border-radius: var(--border-radius-full);
    }

    // ORIENTATION MODIFIERS

    &--horizontal {
      flex-direction: row;
    }

    &--vertical {
      flex-direction: column;
      border-bottom: none;
      border-right: 2px solid var(--color-border);
      overflow-x: hidden;
      overflow-y: auto;
    }

    // SIZE MODIFIERS

    &--sm {
      gap: var(--spacing-xs);
    }

    &--md {
      gap: var(--spacing-sm);
    }

    &--lg {
      gap: var(--spacing-md);
    }

    // VARIANT MODIFIERS

    // Default variant (with bottom border)
    &--default {
      border-bottom: 2px solid var(--color-border);

      &.tabs__list--vertical {
        border-bottom: none;
        border-right: 2px solid var(--color-border);
      }
    }

    // Pills variant (rounded backgrounds)
    &--pills {
      border-bottom: none;
      gap: var(--spacing-sm);

      &.tabs__list--vertical {
        border-right: none;
      }

      .tabs__tab {
        border-radius: var(--border-radius-full);

        &--active {
          background-color: var(--color-primary);
          color: var(--color-background);
          border-color: transparent;
        }
      }
    }

    // Underline variant (minimal with animated underline)
    &--underline {
      border-bottom: 1px solid var(--color-border);

      &.tabs__list--vertical {
        border-bottom: none;
        border-right: 1px solid var(--color-border);
      }

      .tabs__tab {
        position: relative;
        border-bottom: none;

        &::after {
          content: '';
          position: absolute;
          bottom: -2px;
          left: 0;
          right: 0;
          height: 2px;
          background-color: var(--color-primary);
          transform: scaleX(0);
          transition: transform var(--transition-duration) var(--transition-timing);
        }

        &--active::after {
          transform: scaleX(1);
        }

        &:hover:not(&--disabled)::after {
          transform: scaleX(0.5);
        }
      }

      &.tabs__list--vertical .tabs__tab {
        &::after {
          bottom: 0;
          left: auto;
          right: -2px;
          width: 2px;
          height: 100%;
          transform: scaleY(0);
        }

        &--active::after {
          transform: scaleY(1);
        }

        &:hover:not(&--disabled)::after {
          transform: scaleY(0.5);
        }
      }
    }

    // Boxed variant (tabs with box background)
    &--boxed {
      border-bottom: none;
      gap: var(--spacing-xs);

      &.tabs__list--vertical {
        border-right: none;
      }

      .tabs__tab {
        background-color: var(--color-surface);
        border: 1px solid var(--color-border);
        border-bottom: none;
        border-radius: var(--border-radius) var(--border-radius) 0 0;
        margin-bottom: -1px;

        &--active {
          background-color: var(--color-background);
          border-bottom-color: var(--color-background);
          z-index: 1;
        }
      }

      &.tabs__list--vertical .tabs__tab {
        border-bottom: 1px solid var(--color-border);
        border-right: none;
        border-radius: var(--border-radius) 0 0 var(--border-radius);
        margin-bottom: 0;
        margin-right: -1px;

        &--active {
          border-right-color: var(--color-background);
        }
      }
    }

    // FULL WIDTH MODIFIER

    &--full-width {
      .tabs__tab {
        flex: 1;
        justify-content: center;
      }
    }
  }

  // Individual tab button
  &__tab {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md) var(--spacing-lg);
    font-family: var(--font-family-base);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    line-height: 1.5;
    color: var(--color-text-secondary);
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    user-select: none;
    white-space: nowrap;
    transition-property: color, background-color, border-color;
    transition-duration: var(--transition-duration);
    transition-timing-function: var(--transition-timing);

    // Remove default button styles
    outline: none;
    text-decoration: none;

    // Minimum touch target size (WCAG 2.1 AAA: 44x44px)
    min-height: 44px;

    // Hover state
    &:hover:not(&--disabled):not(&--active) {
      color: var(--color-text);
      background-color: var(--color-surface-hover);
    }

    // Active state
    &--active {
      color: var(--color-primary);
      border-bottom-color: var(--color-primary);
    }

    // Focus state
    &:focus-visible {
      outline: 2px solid var(--color-primary);
      outline-offset: -2px;
      z-index: 1;
    }

    // Disabled state
    &--disabled {
      color: var(--color-text-tertiary);
      cursor: not-allowed;
      opacity: 0.5;
      pointer-events: none;
    }

    // Respect reduced motion preference
    @media (prefers-reduced-motion: reduce) {
      transition: none;
    }
  }

  // Tab icon
  &__tab-icon {
    flex-shrink: 0;
  }

  // Tab label
  &__tab-label {
    flex-shrink: 0;
  }

  // Tab panels container
  &__panels {
    flex: 1;
    min-height: 0; // Allow flex to shrink
  }
}

// SIZE VARIANTS FOR TABS

.tabs__list--sm .tabs__tab {
  padding: calc(var(--spacing-sm) * 0.75) var(--spacing-md);
  font-size: var(--font-size-sm);
  min-height: 36px;
}

.tabs__list--md .tabs__tab {
  padding: var(--spacing-md) var(--spacing-lg);
  font-size: var(--font-size-base);
  min-height: 44px;
}

.tabs__list--lg .tabs__tab {
  padding: var(--spacing-lg) var(--spacing-xl);
  font-size: var(--font-size-lg);
  min-height: 52px;
}

// VERTICAL LAYOUT

.tabs__list--vertical {
  ~ .tabs__panels {
    margin-left: var(--spacing-lg);
  }
}

// Helper class for tabs with panels side-by-side
.tabs--horizontal-panels {
  flex-direction: row;

  .tabs__list {
    flex-shrink: 0;
  }

  .tabs__panels {
    flex: 1;
  }
}
